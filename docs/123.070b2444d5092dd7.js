"use strict";(self.webpackChunkdmitrygrinko=self.webpackChunkdmitrygrinko||[]).push([[123],{123:(m,i,r)=>{r.r(i),r.d(i,{CategoryComponent:()=>P});var a=r(2881),g=r(5207),t=r(1360),d=r(6659),l=r(8590);const u=n=>["/post",n],p=(n,c)=>["/subcategory",n,c];function _(n,c){if(1&n){const o=t.RV6();t.j41(0,"a",11),t.bIt("click",function(s){return t.eBV(o),t.Njj(s.stopPropagation())}),t.EFF(1),t.nI1(2,"titlecase"),t.k0s()}if(2&n){const o=t.XpG().$implicit,e=t.XpG();t.Y8G("routerLink",t.l_i(4,p,e.categorySlug,e.getSubcategorySlug(o.subcategory))),t.R7$(),t.SpI(" ",t.bMT(2,2,o.subcategory)," ")}}function h(n,c){if(1&n&&(t.j41(0,"a",6)(1,"article",7)(2,"div",8),t.DNE(3,_,3,7,"a",9),t.k0s(),t.j41(4,"h2"),t.EFF(5),t.k0s(),t.j41(6,"p",10),t.EFF(7),t.k0s()()()),2&n){const o=c.$implicit,e=c.index,s=t.XpG();t.AVh("focused",s.isPostFocused(e)),t.Y8G("routerLink",t.eq3(7,u,o.slug)),t.BMQ("data-post-index",e),t.R7$(3),t.Y8G("ngIf",o.subcategory),t.R7$(2),t.JRh(o.title),t.R7$(2),t.JRh(o.excerpt)}}function f(n,c){1&n&&(t.j41(0,"div",12)(1,"p"),t.EFF(2,"No posts found in this category."),t.k0s()())}let P=(()=>{class n{blogService;route;router;posts=[];categorySlug="";categoryDisplayName="";focusedPostIndex=-1;constructor(o,e,s){this.blogService=o,this.route=e,this.router=s}ngOnInit(){this.route.params.subscribe(o=>{this.categorySlug=o.category,this.loadCategoryData(),this.loadPosts()})}loadCategoryData(){this.blogService.getCategoryTree().subscribe(o=>{const e=o.find(s=>s.slug===this.categorySlug);this.categoryDisplayName=e?e.name:this.categorySlug})}loadPosts(){this.blogService.getPostsByCategory(this.categorySlug).subscribe(o=>{this.posts=o,this.autoFocusFirstPost()})}autoFocusFirstPost(){this.posts.length>0?(this.focusedPostIndex=0,setTimeout(()=>{this.scrollToFocusedPost()},100)):this.focusedPostIndex=-1}getCategoryDisplayName(){return this.categoryDisplayName}getSubcategorySlug(o){return o?o.toLowerCase().replace(/\s+/g,"-"):""}onKeyDown(o){if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter"].includes(o.key)||o.ctrlKey)return;const e=o.target;if("INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&0!==this.posts.length)switch(o.preventDefault(),o.key){case"ArrowDown":case"ArrowRight":this.navigateToNext();break;case"ArrowUp":case"ArrowLeft":this.navigateToPrevious();break;case"Enter":this.openFocusedPost()}}navigateToNext(){0!==this.posts.length&&(this.focusedPostIndex=(this.focusedPostIndex+1)%this.posts.length,this.scrollToFocusedPost())}navigateToPrevious(){0!==this.posts.length&&(this.focusedPostIndex<=0?this.focusedPostIndex=this.posts.length-1:this.focusedPostIndex--,this.scrollToFocusedPost())}scrollToFocusedPost(){setTimeout(()=>{const o=document.querySelector(`[data-post-index="${this.focusedPostIndex}"]`);o&&o.scrollIntoView({behavior:"smooth",block:"center"})},0)}openFocusedPost(){this.focusedPostIndex>=0&&this.focusedPostIndex<this.posts.length&&this.router.navigate(["/post",this.posts[this.focusedPostIndex].slug])}isPostFocused(o){return this.focusedPostIndex===o}static \u0275fac=function(e){return new(e||n)(t.rXU(d.c),t.rXU(l.nX),t.rXU(l.Ix))};static \u0275cmp=t.VBU({type:n,selectors:[["app-category"]],hostBindings:function(e,s){1&e&&t.bIt("keydown",function(C){return s.onKeyDown(C)},!1,t.tSv)},decls:8,vars:5,consts:[[1,"header"],[1,"breadcrumbs"],[1,"breadcrumb-item"],[1,"posts-grid"],["class","post-card-link",3,"routerLink","focused",4,"ngFor","ngForOf"],["class","no-posts",4,"ngIf"],[1,"post-card-link",3,"routerLink"],[1,"post-card"],[1,"post-meta"],["class","subcategory-label clickable",3,"routerLink","click",4,"ngIf"],[1,"excerpt"],[1,"subcategory-label","clickable",3,"click","routerLink"],[1,"no-posts"]],template:function(e,s){1&e&&(t.j41(0,"header",0)(1,"div",1)(2,"span",2),t.EFF(3),t.nI1(4,"titlecase"),t.k0s()()(),t.j41(5,"main",3),t.DNE(6,h,8,9,"a",4),t.k0s(),t.DNE(7,f,3,0,"div",5)),2&e&&(t.R7$(3),t.JRh(t.bMT(4,3,s.getCategoryDisplayName())),t.R7$(3),t.Y8G("ngForOf",s.posts),t.R7$(),t.Y8G("ngIf",0===s.posts.length))},dependencies:[a.MD,a.Sq,a.bT,a.PV,g.iI,g.Wk],styles:[".header[_ngcontent-%COMP%]{padding-bottom:1rem}.breadcrumbs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:16px;font-size:14px}.breadcrumb-item[_ngcontent-%COMP%]{background:#f6f8fa;color:#656d76;padding:2px 6px;border-radius:4px;font-size:12px;font-weight:400}.posts-grid[_ngcontent-%COMP%]{display:grid;gap:24px}.post-card-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit;display:block;border-radius:6px;transition:all .15s ease}.post-card-link.focused[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]{background:#f6f8fa}.post-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #d1d9e0;border-radius:6px;padding:16px;transition:all .15s ease;cursor:pointer}.post-card[_ngcontent-%COMP%]:hover{background:#f6f8fa}.post-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.3rem;line-height:1.4}.post-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#444;text-decoration:none}.post-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .post-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .post-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited, .post-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#444}.post-meta[_ngcontent-%COMP%]{margin-bottom:8px}.subcategory-label[_ngcontent-%COMP%]{background:#f6f8fa;color:#656d76;padding:2px 6px;border-radius:4px;font-size:12px;font-weight:400;text-decoration:none}.subcategory-label.clickable[_ngcontent-%COMP%]{cursor:pointer;transition:all .15s ease}.subcategory-label.clickable[_ngcontent-%COMP%]:hover{background:#eaeef2;color:#424a53;text-decoration:none}.subcategory-label.clickable[_ngcontent-%COMP%]:visited, .subcategory-label.clickable[_ngcontent-%COMP%]:active, .subcategory-label.clickable[_ngcontent-%COMP%]:focus{color:#656d76;text-decoration:none}.excerpt[_ngcontent-%COMP%]{color:#444;line-height:1.6;margin-bottom:1rem}.read-more[_ngcontent-%COMP%]{color:#444;text-decoration:none;font-weight:500;font-size:.9rem}.read-more[_ngcontent-%COMP%]:hover, .read-more[_ngcontent-%COMP%]:focus, .read-more[_ngcontent-%COMP%]:visited, .read-more[_ngcontent-%COMP%]:active{color:#444}.no-posts[_ngcontent-%COMP%]{text-align:center;color:#444;font-style:italic;margin-top:3rem}@media (max-width: 768px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.post-card[_ngcontent-%COMP%]{padding:1rem}.post-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}}"]})}return n})()}}]);