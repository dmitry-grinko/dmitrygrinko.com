"use strict";(self.webpackChunkdmitrygrinko=self.webpackChunkdmitrygrinko||[]).push([[123],{123:(C,i,s)=>{s.r(i),s.d(i,{CategoryComponent:()=>m});var c=s(2881),g=s(5207),t=s(1360),d=s(6659),l=s(8590);const u=n=>["/post",n],p=(n,a)=>["/subcategory",n,a];function h(n,a){if(1&n){const o=t.RV6();t.j41(0,"a",11),t.bIt("click",function(r){return t.eBV(o),t.Njj(r.stopPropagation())}),t.EFF(1),t.nI1(2,"titlecase"),t.k0s()}if(2&n){const o=t.XpG().$implicit,e=t.XpG();t.Y8G("routerLink",t.l_i(4,p,e.categorySlug,e.getSubcategorySlug(o.subcategory))),t.R7$(),t.SpI(" ",t.bMT(2,2,o.subcategory)," ")}}function _(n,a){if(1&n&&(t.j41(0,"a",6)(1,"article",7)(2,"div",8),t.DNE(3,h,3,7,"a",9),t.k0s(),t.j41(4,"h2"),t.EFF(5),t.k0s(),t.j41(6,"p",10),t.EFF(7),t.k0s()()()),2&n){const o=a.$implicit,e=a.index,r=t.XpG();t.AVh("focused",r.isPostFocused(e)),t.Y8G("routerLink",t.eq3(7,u,o.slug)),t.BMQ("data-post-index",e),t.R7$(3),t.Y8G("ngIf",o.subcategory),t.R7$(2),t.JRh(o.title),t.R7$(2),t.JRh(o.excerpt)}}function P(n,a){1&n&&(t.j41(0,"div",12)(1,"p"),t.EFF(2,"No posts found in this category."),t.k0s()())}let m=(()=>{class n{blogService;route;router;posts=[];categorySlug="";categoryDisplayName="";focusedPostIndex=-1;constructor(o,e,r){this.blogService=o,this.route=e,this.router=r}ngOnInit(){this.route.params.subscribe(o=>{this.categorySlug=o.category,this.loadCategoryData(),this.loadPosts()})}loadCategoryData(){this.blogService.getCategoryTree().subscribe(o=>{const e=o.find(r=>r.slug===this.categorySlug);this.categoryDisplayName=e?e.name:this.categorySlug})}loadPosts(){this.blogService.getPostsByCategory(this.categorySlug).subscribe(o=>{this.posts=o,this.autoFocusFirstPost()})}autoFocusFirstPost(){this.posts.length>0?(this.focusedPostIndex=0,setTimeout(()=>{this.scrollToFocusedPost()},100)):this.focusedPostIndex=-1}getCategoryDisplayName(){return this.categoryDisplayName}getSubcategorySlug(o){return o?o.toLowerCase().replace(/\s+/g,"-"):""}onKeyDown(o){if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter"].includes(o.key)||o.ctrlKey)return;const e=o.target;if("INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&0!==this.posts.length)switch(o.preventDefault(),o.key){case"ArrowDown":case"ArrowRight":this.navigateToNext();break;case"ArrowUp":case"ArrowLeft":this.navigateToPrevious();break;case"Enter":this.openFocusedPost()}}navigateToNext(){0!==this.posts.length&&(this.focusedPostIndex=(this.focusedPostIndex+1)%this.posts.length,this.scrollToFocusedPost())}navigateToPrevious(){0!==this.posts.length&&(this.focusedPostIndex<=0?this.focusedPostIndex=this.posts.length-1:this.focusedPostIndex--,this.scrollToFocusedPost())}scrollToFocusedPost(){setTimeout(()=>{const o=document.querySelector(`[data-post-index="${this.focusedPostIndex}"]`);o&&o.scrollIntoView({behavior:"smooth",block:"center"})},0)}openFocusedPost(){this.focusedPostIndex>=0&&this.focusedPostIndex<this.posts.length&&this.router.navigate(["/post",this.posts[this.focusedPostIndex].slug])}isPostFocused(o){return this.focusedPostIndex===o}static \u0275fac=function(e){return new(e||n)(t.rXU(d.c),t.rXU(l.nX),t.rXU(l.Ix))};static \u0275cmp=t.VBU({type:n,selectors:[["app-category"]],hostBindings:function(e,r){1&e&&t.bIt("keydown",function(y){return r.onKeyDown(y)},!1,t.tSv)},decls:8,vars:5,consts:[[1,"header"],[1,"breadcrumbs"],[1,"breadcrumb-item"],[1,"posts-grid"],["class","post-card-link",3,"routerLink","focused",4,"ngFor","ngForOf"],["class","no-posts",4,"ngIf"],[1,"post-card-link",3,"routerLink"],[1,"post-card"],[1,"post-meta"],["class","subcategory-label clickable",3,"routerLink","click",4,"ngIf"],[1,"excerpt"],[1,"subcategory-label","clickable",3,"click","routerLink"],[1,"no-posts"]],template:function(e,r){1&e&&(t.j41(0,"header",0)(1,"div",1)(2,"span",2),t.EFF(3),t.nI1(4,"titlecase"),t.k0s()()(),t.j41(5,"main",3),t.DNE(6,_,8,9,"a",4),t.k0s(),t.DNE(7,P,3,0,"div",5)),2&e&&(t.R7$(3),t.JRh(t.bMT(4,3,r.getCategoryDisplayName())),t.R7$(3),t.Y8G("ngForOf",r.posts),t.R7$(),t.Y8G("ngIf",0===r.posts.length))},dependencies:[c.MD,c.Sq,c.bT,c.PV,g.iI,g.Wk],styles:[".header[_ngcontent-%COMP%]{padding-bottom:1rem}.breadcrumbs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:16px;font-size:14px}.breadcrumb-item[_ngcontent-%COMP%]{background:var(--color-bg-secondary);color:var(--color-text-secondary);padding:2px 6px;border-radius:4px;font-size:12px;font-weight:400;transition:var(--theme-transition)}.posts-grid[_ngcontent-%COMP%]{display:grid;gap:24px}.post-card-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit;display:block;border-radius:6px;transition:var(--theme-transition)}.post-card-link.focused[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]{background:var(--color-surface-hover)}.post-card[_ngcontent-%COMP%]{background:var(--color-bg-primary);border:1px solid var(--color-border-primary);border-radius:6px;padding:16px;transition:var(--theme-transition);cursor:pointer}.post-card[_ngcontent-%COMP%]:hover{background:var(--color-surface-hover)}.post-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.3rem;line-height:1.4}.post-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-text-primary);text-decoration:none;transition:var(--theme-transition)}.post-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .post-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .post-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited, .post-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:var(--color-text-primary);opacity:.8}.post-meta[_ngcontent-%COMP%]{margin-bottom:8px}.subcategory-label[_ngcontent-%COMP%]{background:var(--color-bg-secondary);color:var(--color-text-secondary);padding:2px 6px;border-radius:4px;font-size:12px;font-weight:400;text-decoration:none;transition:var(--theme-transition)}.subcategory-label.clickable[_ngcontent-%COMP%]{cursor:pointer}.subcategory-label.clickable[_ngcontent-%COMP%]:hover{background:var(--color-bg-tertiary);color:var(--color-text-primary);text-decoration:none}.subcategory-label.clickable[_ngcontent-%COMP%]:visited, .subcategory-label.clickable[_ngcontent-%COMP%]:active, .subcategory-label.clickable[_ngcontent-%COMP%]:focus{color:var(--color-text-secondary);text-decoration:none}.excerpt[_ngcontent-%COMP%]{color:var(--color-text-secondary);line-height:1.6;margin-bottom:1rem;transition:var(--theme-transition)}.read-more[_ngcontent-%COMP%]{color:var(--color-text-accent);text-decoration:none;font-weight:500;font-size:.9rem;transition:var(--theme-transition)}.read-more[_ngcontent-%COMP%]:hover, .read-more[_ngcontent-%COMP%]:focus, .read-more[_ngcontent-%COMP%]:visited, .read-more[_ngcontent-%COMP%]:active{color:var(--color-text-accent);opacity:.8}.no-posts[_ngcontent-%COMP%]{text-align:center;color:var(--color-text-primary);font-style:italic;margin-top:3rem;transition:var(--theme-transition)}@media (max-width: 768px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.post-card[_ngcontent-%COMP%]{padding:1rem}.post-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}}"]})}return n})()}}]);