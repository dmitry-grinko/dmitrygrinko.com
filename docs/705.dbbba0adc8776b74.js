"use strict";(self.webpackChunkdmitrygrinko=self.webpackChunkdmitrygrinko||[]).push([[705],{9705:(y,c,r)=>{r.r(c),r.d(c,{SubcategoryComponent:()=>P});var a=r(2881),g=r(5207),t=r(1360),p=r(6659),d=r(8590);const u=n=>["/category",n],h=n=>["/post",n];function b(n,i){if(1&n&&(t.j41(0,"span",13),t.EFF(1),t.nI1(2,"titlecase"),t.k0s()),2&n){const o=t.XpG().$implicit;t.R7$(),t.JRh(t.bMT(2,1,o.subcategory))}}function f(n,i){if(1&n&&(t.j41(0,"a",8)(1,"article",9)(2,"div",10),t.DNE(3,b,3,3,"span",11),t.k0s(),t.j41(4,"h2"),t.EFF(5),t.k0s(),t.j41(6,"p",12),t.EFF(7),t.k0s()()()),2&n){const o=i.$implicit,e=i.index,s=t.XpG();t.AVh("focused",s.isPostFocused(e)),t.Y8G("routerLink",t.eq3(7,h,o.slug)),t.BMQ("data-post-index",e),t.R7$(3),t.Y8G("ngIf",o.subcategory),t.R7$(2),t.JRh(o.title),t.R7$(2),t.JRh(o.excerpt)}}function m(n,i){if(1&n&&(t.j41(0,"div",14)(1,"h2"),t.EFF(2,"No Posts Found"),t.k0s(),t.j41(3,"p"),t.EFF(4,"No posts found in this subcategory."),t.k0s(),t.j41(5,"a",15),t.EFF(6),t.k0s()()),2&n){const o=t.XpG();t.R7$(5),t.Y8G("routerLink",t.eq3(2,u,o.categorySlug)),t.R7$(),t.SpI("View all ",o.getCategoryDisplayName()," posts")}}let P=(()=>{class n{blogService;route;router;posts=[];categorySlug="";subcategorySlug="";categoryDisplayName="";subcategoryDisplayName="";focusedPostIndex=-1;constructor(o,e,s){this.blogService=o,this.route=e,this.router=s}ngOnInit(){this.route.params.subscribe(o=>{this.categorySlug=o.category,this.subcategorySlug=o.subcategory,this.loadCategoryData(),this.loadPosts()})}loadCategoryData(){this.blogService.getCategoryTree().subscribe(o=>{const e=o.find(s=>s.slug===this.categorySlug);if(e){this.categoryDisplayName=e.name;const s=e.subcategories.find(l=>l.slug===this.subcategorySlug);this.subcategoryDisplayName=s?s.name:this.subcategorySlug}})}loadPosts(){this.blogService.getPostsBySubcategory(this.categorySlug,this.subcategorySlug).subscribe(o=>{this.posts=o,this.autoFocusFirstPost()})}autoFocusFirstPost(){this.posts.length>0?(this.focusedPostIndex=0,setTimeout(()=>{this.scrollToFocusedPost()},100)):this.focusedPostIndex=-1}getCategoryDisplayName(){return this.categoryDisplayName}getSubcategoryDisplayName(){return this.subcategoryDisplayName}onKeyDown(o){if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter"].includes(o.key)||o.ctrlKey)return;const e=o.target;if("INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&0!==this.posts.length)switch(o.preventDefault(),o.key){case"ArrowDown":case"ArrowRight":this.navigateToNext();break;case"ArrowUp":case"ArrowLeft":this.navigateToPrevious();break;case"Enter":this.openFocusedPost()}}navigateToNext(){0!==this.posts.length&&(this.focusedPostIndex=(this.focusedPostIndex+1)%this.posts.length,this.scrollToFocusedPost())}navigateToPrevious(){0!==this.posts.length&&(this.focusedPostIndex<=0?this.focusedPostIndex=this.posts.length-1:this.focusedPostIndex--,this.scrollToFocusedPost())}scrollToFocusedPost(){setTimeout(()=>{const o=document.querySelector(`[data-post-index="${this.focusedPostIndex}"]`);o&&o.scrollIntoView({behavior:"smooth",block:"center"})},0)}openFocusedPost(){this.focusedPostIndex>=0&&this.focusedPostIndex<this.posts.length&&this.router.navigate(["/post",this.posts[this.focusedPostIndex].slug])}isPostFocused(o){return this.focusedPostIndex===o}static \u0275fac=function(e){return new(e||n)(t.rXU(p.c),t.rXU(d.nX),t.rXU(d.Ix))};static \u0275cmp=t.VBU({type:n,selectors:[["app-subcategory"]],hostBindings:function(e,s){1&e&&t.bIt("keydown",function(_){return s.onKeyDown(_)},!1,t.tSv)},decls:13,vars:11,consts:[[1,"header"],[1,"breadcrumbs"],[1,"breadcrumb-link",3,"routerLink"],[1,"breadcrumb-separator"],[1,"breadcrumb-item"],[1,"posts-grid"],["class","post-card-link",3,"routerLink","focused",4,"ngFor","ngForOf"],["class","no-posts",4,"ngIf"],[1,"post-card-link",3,"routerLink"],[1,"post-card"],[1,"post-meta"],["class","subcategory-label",4,"ngIf"],[1,"excerpt"],[1,"subcategory-label"],[1,"no-posts"],[1,"back-link",3,"routerLink"]],template:function(e,s){1&e&&(t.j41(0,"header",0)(1,"div",1)(2,"a",2),t.EFF(3),t.nI1(4,"titlecase"),t.k0s(),t.j41(5,"span",3),t.EFF(6,">"),t.k0s(),t.j41(7,"span",4),t.EFF(8),t.nI1(9,"titlecase"),t.k0s()()(),t.j41(10,"main",5),t.DNE(11,f,8,9,"a",6),t.k0s(),t.DNE(12,m,7,4,"div",7)),2&e&&(t.R7$(2),t.Y8G("routerLink",t.eq3(9,u,s.categorySlug)),t.R7$(),t.SpI(" ",t.bMT(4,5,s.getCategoryDisplayName())," "),t.R7$(5),t.JRh(t.bMT(9,7,s.getSubcategoryDisplayName())),t.R7$(3),t.Y8G("ngForOf",s.posts),t.R7$(),t.Y8G("ngIf",0===s.posts.length))},dependencies:[a.MD,a.Sq,a.bT,a.PV,g.iI,g.Wk],styles:[".header[_ngcontent-%COMP%]{padding-bottom:1rem}.breadcrumbs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:16px;font-size:14px}.breadcrumb-link[_ngcontent-%COMP%]{background:#f6f8fa;color:#656d76;padding:2px 6px;border-radius:4px;font-size:12px;font-weight:400;text-decoration:none;transition:all .15s ease}.breadcrumb-link[_ngcontent-%COMP%]:hover{background:#eaeef2;color:#424a53;text-decoration:none}.breadcrumb-link[_ngcontent-%COMP%]:visited, .breadcrumb-link[_ngcontent-%COMP%]:active, .breadcrumb-link[_ngcontent-%COMP%]:focus{color:#656d76;text-decoration:none}.breadcrumb-item[_ngcontent-%COMP%]{background:#f6f8fa;color:#656d76;padding:2px 6px;border-radius:4px;font-size:12px;font-weight:400}.breadcrumb-separator[_ngcontent-%COMP%]{color:#656d76;font-weight:500;margin:0 4px}.posts-grid[_ngcontent-%COMP%]{display:grid;gap:24px}.post-card-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit;display:block;border-radius:6px;transition:all .15s ease}.post-card-link.focused[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]{background:#f6f8fa}.post-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #d1d9e0;border-radius:6px;padding:16px;transition:all .15s ease;cursor:pointer}.post-card[_ngcontent-%COMP%]:hover{background:#f6f8fa}.post-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.3rem;line-height:1.4}.post-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1a1a1a;text-decoration:none}.post-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#1976d2}.post-meta[_ngcontent-%COMP%]{margin-bottom:8px}.subcategory-label[_ngcontent-%COMP%]{background:#f6f8fa;color:#656d76;padding:2px 6px;border-radius:4px;font-size:12px;font-weight:400}.excerpt[_ngcontent-%COMP%]{color:#666;line-height:1.6;margin-bottom:1rem}.read-more[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none;font-weight:500;font-size:.9rem}.read-more[_ngcontent-%COMP%]:hover{text-decoration:underline}.no-posts[_ngcontent-%COMP%]{text-align:center;margin-top:3rem;color:#666}.no-posts[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem;color:#999}.no-posts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2rem}.back-link[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none;font-weight:500}.back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 768px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.post-card[_ngcontent-%COMP%]{padding:1rem}.post-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}}"]})}return n})()}}]);